// Script de WebEx CORREGIDO
function iniciarWebex(destino) {
    console.log('üîÑ Iniciando WebEx para:', destino);
    
    // Validar que WebEx est√© cargado
    if (typeof Webex === 'undefined') {
        alert('‚ùå Error: WebEx no est√° cargado. Verifica tu conexi√≥n.');
        return;
    }
    
    try {
        console.log('‚úÖ WebEx SDK detectado');
        
        // Configuraci√≥n del meeting - FORMA CORRECTA
        const webex = Webex.init({
            config: {
                meetings: {
                    deviceType: 'WEB'
                }
            },
            credentials: {
                access_token: undefined // No necesita token para guest
            }
        });
        
        console.log('‚úÖ WebEx inicializado correctamente');
        
        // Crear reuni√≥n de forma directa
        webex.meetings.create(destino).then(function(meeting) {
            console.log('‚úÖ Reuni√≥n creada:', meeting);
            
            // Unirse a la reuni√≥n
            return meeting.join().then(function() {
                console.log('‚úÖ Unido a la reuni√≥n exitosamente');
                alert('‚úÖ Conectado con Sandy - Asesora OneBank');
                
                // Opcional: Abrir en nueva pesta√±a
                meeting.on('meeting:started', function() {
                    console.log('üé• Reuni√≥n iniciada');
                });
                
            }).catch(function(joinError) {
                console.error('‚ùå Error al unirse:', joinError);
                alert('Error al unirse a la reuni√≥n: ' + joinError.message);
            });
            
        }).catch(function(error) {
            console.error('‚ùå Error al crear reuni√≥n:', error);
            alert('No se pudo crear la reuni√≥n. Error: ' + error.message);
        });
        
    } catch (error) {
        console.error('‚ùå Error general:', error);
        alert('Error al configurar WebEx: ' + error.message);
    }
}
